(this["webpackJsonpmy-epic"]=this["webpackJsonpmy-epic"]||[]).push([[5],{100:function(e,t,n){e.exports=n(132)},105:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(17),a=n.n(i),c=n(23),l=(n(105),n(12)),u=n(74),s=n.n(u),p=n(3),f=n(13),b=n(133),y=n(55),h=n(60);function g(){var e=Object(l.a)(["\n    \n"]);return g=function(){return e},e}function m(){var e=Object(l.a)(["\n    color:white;\n    margin-left:10px;\n"]);return m=function(){return e},e}function O(){var e=Object(l.a)(["\n    color:#fff;\n    margin-left:10px;\n    &.active {\n        border-bottom: 1px solid #fff;\n    }\n"]);return O=function(){return e},e}function d(){var e=Object(l.a)(["\n    flex:1;\n"]);return d=function(){return e},e}function j(){var e=Object(l.a)(["\n    height:30px;\n"]);return j=function(){return e},e}function w(){var e=Object(l.a)(["\n    background-color:#001529;\n    color:white;\n    padding:10px;\n    display:flex;\n    align-items: center;\n"]);return w=function(){return e},e}var v=f.a.header(w()),U=f.a.img(j()),P=f.a.nav(d()),E=Object(f.a)(c.b)(O()),k=Object(f.a)(b.a)(m()),x=f.a.div(g()),z=Object(h.a)((function(e){var t=Object(y.a)(),n=t.AuthStore,r=t.UserStore,i=Object(p.f)();return o.a.createElement(v,null,o.a.createElement(U,{src:s.a}),o.a.createElement(P,null,o.a.createElement(E,{to:"/",exact:!0,activeClassName:"active"},"\u9996\u9875"),o.a.createElement(E,{to:"/history",exact:!0,activeClassName:"active"},"\u4e0a\u4f20\u5386\u53f2"),o.a.createElement(E,{to:"/about",exact:!0,activeClassName:"active"},"\u5173\u4e8e\u6211")),o.a.createElement(x,null,r.currentUser?o.a.createElement(o.a.Fragment,null,r.currentUser.attributes.username,o.a.createElement(k,{type:"primary",onClick:function(){n.logout(),i.push("/")}},"\u6ce8\u9500")):o.a.createElement(o.a.Fragment,null,o.a.createElement(k,{type:"primary",onClick:function(){i.push("/login")}},"\u767b\u5f55"),o.a.createElement(k,{type:"primary",onClick:function(){i.push("/register")}}," \u6ce8\u518c "))))}));function D(){var e=Object(l.a)(["\n    padding:10px;\n    text-align:center;\n    font-size:12px;\n"]);return D=function(){return e},e}var F=f.a.footer(D()),L=function(){return o.a.createElement(F,null,o.a.createElement("div",null,"Footer"))},A=function(){return o.a.createElement("div",null,"Loading....")},C=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(3),n.e(9),n.e(12)]).then(n.bind(null,433))})),S=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(8),n.e(11)]).then(n.bind(null,434))})),I=Object(r.lazy)((function(){return n.e(10).then(n.bind(null,423))})),M=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(13)]).then(n.bind(null,424))})),T=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(14)]).then(n.bind(null,425))}));var W=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(z,null),o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(A,null)},o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/",exact:!0},o.a.createElement(C,null)),o.a.createElement(p.a,{path:"/history",exact:!0},o.a.createElement(S,null)),o.a.createElement(p.a,{path:"/about",exact:!0},o.a.createElement(I,null)),o.a.createElement(p.a,{path:"/login",exact:!0},o.a.createElement(M,null)),o.a.createElement(p.a,{path:"/register",exact:!0},o.a.createElement(T,null))))),o.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(131);a.a.render(o.a.createElement(c.a,null,o.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(7),o=n(14),i=n(15),a=n(2),c=(n(32),n(1)),l=n(6),u=n.n(l);console.log("AV: ",u.a),u.a.init({appId:"5rNBCHoC93QGdT46Wto1Ouqk-gzGzoHsz",appKey:"6ToblRTyjDWoIOvJLEREfjLM",serverURL:"https://5rnbchoc.lc-cn-n1-shared.com"});var s,p,f={register:function(e,t){var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},login:function(e,t){return new Promise((function(n,r){l.User.logIn(e,t).then((function(e){n(e)}),(function(e){r(e)}))}))},logout:function(){l.User.logOut()},getCurrentUser:function(){return l.User.current()}},b={add:function(e,t){var n=new u.a.Object("Image"),r=new u.a.File(t,e);return n.set("filename",t),n.set("owner",u.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){e(t)}),(function(e){t(e)}))}))},delete:function(e){var t=u.a.Object.createWithoutData("Image",e.id);return new Promise((function(e,n){t.destroy().then((function(t){return e(t)}),(function(e){return n(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,o=void 0===r?10:r,i=new u.a.Query("Image");return i.equalTo("owner",u.a.User.current()),i.limit(o),i.skip(n*o),i.descending("createdAt"),i.include("owner"),new Promise((function(e,t){i.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},findAll:function(){var e=new u.a.Query("Image");return e.equalTo("owner",u.a.User.current()),e.descending("createdAt"),e.include("owner"),new Promise((function(t,n){e.find().then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}};window.AV=u.a,window.Uploader=b,window.Auth=f;var y,h,g,m,O,d,j,w,v,U,P,E,k,x=new(s=function(){function e(){Object(o.a)(this,e),Object(r.a)(this,"currentUser",p,this)}return Object(i.a)(e,[{key:"pullUser",value:function(){this.currentUser=f.getCurrentUser()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),p=Object(a.a)(s.prototype,"currentUser",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.getCurrentUser()}}),Object(a.a)(s.prototype,"pullUser",[c.f],Object.getOwnPropertyDescriptor(s.prototype,"pullUser"),s.prototype),Object(a.a)(s.prototype,"resetUser",[c.f],Object.getOwnPropertyDescriptor(s.prototype,"resetUser"),s.prototype),s),z=new(y=function(){function e(){Object(o.a)(this,e),Object(r.a)(this,"list",h,this),Object(r.a)(this,"isLoading",g,this),Object(r.a)(this,"hasMore",m,this),Object(r.a)(this,"page",O,this),Object(r.a)(this,"filter",d,this),this.limit=10}return Object(i.a)(e,[{key:"append",value:function(e){console.log("append-list",this.list),console.log("append-newList",e),this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;return this.isLoading=!0,new Promise((function(t,n){b.find({page:e.page,limit:e.limit}).then((function(n){e.append(n),e.page++,n.length<e.limit&&(e.hasMore=!1,console.log("last page!")),t(n),console.log("find!")})).catch((function(e){n(e),console.log("error!")})).finally((function(){e.isLoading=!1}))}))}},{key:"findAll",value:function(){var e=this;return this.list=[],this.isLoading=!0,new Promise((function(t,n){b.findAll().then((function(n){e.list=n,e.page++,t(n),console.log("find all!")})).catch((function(e){n(e),console.log("error!")})).finally((function(){e.isLoading=!1}))}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}},{key:"delete",value:function(e){var t=this;return new Promise((function(n,r){b.delete(e).then((function(r){t.list=t.list.filter((function(t){return!(t===e)})),n(r)}),(function(e){return r(e)}))}))}},{key:"setFilter",value:function(e){this.filter=e}},{key:"filteredList",get:function(){var e=this;return this.list.filter((function(t){return e.filter(t)}))}}]),e}(),h=Object(a.a)(y.prototype,"list",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=Object(a.a)(y.prototype,"isLoading",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=Object(a.a)(y.prototype,"hasMore",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),O=Object(a.a)(y.prototype,"page",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=Object(a.a)(y.prototype,"filter",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){return!0}}}),Object(a.a)(y.prototype,"filteredList",[c.g],Object.getOwnPropertyDescriptor(y.prototype,"filteredList"),y.prototype),Object(a.a)(y.prototype,"append",[c.f],Object.getOwnPropertyDescriptor(y.prototype,"append"),y.prototype),Object(a.a)(y.prototype,"find",[c.f],Object.getOwnPropertyDescriptor(y.prototype,"find"),y.prototype),Object(a.a)(y.prototype,"findAll",[c.f],Object.getOwnPropertyDescriptor(y.prototype,"findAll"),y.prototype),Object(a.a)(y.prototype,"reset",[c.f],Object.getOwnPropertyDescriptor(y.prototype,"reset"),y.prototype),Object(a.a)(y.prototype,"delete",[c.f],Object.getOwnPropertyDescriptor(y.prototype,"delete"),y.prototype),Object(a.a)(y.prototype,"setFilter",[c.f],Object.getOwnPropertyDescriptor(y.prototype,"setFilter"),y.prototype),y),D=new(j=function(){function e(){Object(o.a)(this,e),Object(r.a)(this,"filename",w,this),Object(r.a)(this,"file",v,this),Object(r.a)(this,"isUploading",U,this),Object(r.a)(this,"serverFile",P,this)}return Object(i.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){b.add(e.file,e.filename).then((function(n){e.serverFile=n,t(n)}),(function(e){console.error(e),n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serverFile=null}}]),e}(),w=Object(a.a)(j.prototype,"filename",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(a.a)(j.prototype,"file",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=Object(a.a)(j.prototype,"isUploading",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Object(a.a)(j.prototype,"serverFile",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(j.prototype,"setFilename",[c.f],Object.getOwnPropertyDescriptor(j.prototype,"setFilename"),j.prototype),Object(a.a)(j.prototype,"setFile",[c.f],Object.getOwnPropertyDescriptor(j.prototype,"setFile"),j.prototype),Object(a.a)(j.prototype,"upload",[c.f],Object.getOwnPropertyDescriptor(j.prototype,"upload"),j.prototype),Object(a.a)(j.prototype,"reset",[c.f],Object.getOwnPropertyDescriptor(j.prototype,"reset"),j.prototype),j),F=new(E=function(){function e(){Object(o.a)(this,e),Object(r.a)(this,"values",k,this)}return Object(i.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){f.login(e.values.username,e.values.password).then((function(e){x.pullUser(),t(e)})).catch((function(e){n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){f.register(e.values.username,e.values.password).then((function(e){x.pullUser(),t(e)})).catch((function(e){x.resetUser(),n(e)}))}))}},{key:"logout",value:function(){f.logout(),x.resetUser(),z.reset(),D.reset()}}]),e}(),k=Object(a.a)(E.prototype,"values",[c.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"user A",password:""}}}),Object(a.a)(E.prototype,"setUsername",[c.f],Object.getOwnPropertyDescriptor(E.prototype,"setUsername"),E.prototype),Object(a.a)(E.prototype,"setPassword",[c.f],Object.getOwnPropertyDescriptor(E.prototype,"setPassword"),E.prototype),Object(a.a)(E.prototype,"login",[c.f],Object.getOwnPropertyDescriptor(E.prototype,"login"),E.prototype),Object(a.a)(E.prototype,"register",[c.f],Object.getOwnPropertyDescriptor(E.prototype,"register"),E.prototype),Object(a.a)(E.prototype,"logout",[c.f],Object.getOwnPropertyDescriptor(E.prototype,"logout"),E.prototype),E),L=n(0),A=Object(L.createContext)({AuthStore:F,UserStore:x,ImageStore:D,HistoryStore:z});window.stores={AuthStore:F,UserStore:x,ImageStore:D,HistoryStore:z};var C=function(){return Object(L.useContext)(A)}},74:function(e,t,n){e.exports=n.p+"static/media/logo.d91959ba.svg"}},[[100,6,7]]]);
//# sourceMappingURL=main.16cfb19f.chunk.js.map